# JSONå‘å¸ƒåŠŸèƒ½ä½¿ç”¨ç¤ºä¾‹

## æ¦‚è¿°

å°çº¢ä¹¦MCPå·¥å…·åŒ…ç°åœ¨æ”¯æŒé€šè¿‡JSONå­—ç¬¦ä¸²ç›´æ¥å‘å¸ƒå†…å®¹ï¼Œæ— éœ€ä¾èµ–æ–‡ä»¶è¯»å–ã€‚è¿™æä¾›äº†æ›´å¯é å’Œçµæ´»çš„å‘å¸ƒæ–¹å¼ã€‚

## å¯ç”¨å·¥å…·

### 1. publish_from_json
- **åŠŸèƒ½**: é€šè¿‡JSONå­—ç¬¦ä¸²å‘å¸ƒå•ä¸ªå†…å®¹åˆ°å°çº¢ä¹¦
- **å‚æ•°**:
  - `json_data`: JSONæ ¼å¼çš„å­—ç¬¦ä¸²ï¼ŒåŒ…å«å‘å¸ƒå†…å®¹
  - `title`: è‡ªå®šä¹‰æ ‡é¢˜ï¼ˆå¯é€‰ï¼Œä¸æä¾›åˆ™ä»æ–‡æ¡ˆä¸­æå–ï¼‰

### 2. batch_publish_from_json
- **åŠŸèƒ½**: æ‰¹é‡å¤„ç†JSONå­—ç¬¦ä¸²ä¸­çš„å¤šä¸ªæ•°æ®æ¡ç›®å¹¶å‘å¸ƒåˆ°å°çº¢ä¹¦
- **å‚æ•°**:
  - `json_data`: JSONæ ¼å¼çš„å­—ç¬¦ä¸²ï¼ŒåŒ…å«å¤šä¸ªå‘å¸ƒæ¡ç›®
  - `max_items`: æœ€å¤§å¤„ç†æ¡ç›®æ•°ï¼ˆé»˜è®¤: 5ï¼‰

### 3. preview_json_data
- **åŠŸèƒ½**: é¢„è§ˆJSONæ•°æ®å†…å®¹ï¼Œä¸æ‰§è¡Œå‘å¸ƒæ“ä½œ
- **å‚æ•°**:
  - `json_data`: JSONæ ¼å¼çš„å­—ç¬¦ä¸²

## JSONæ•°æ®æ ¼å¼

### å•ä¸ªæ¡ç›®æ ¼å¼
```json
{
  "fengmian": "https://example.com/cover.jpg",
  "fengmian_pic": "https://example.com/cover_after.jpg",
  "neirongtu": ["https://example.com/img1.jpg", "https://example.com/img2.jpg"],
  "zongjie": "https://example.com/summary.jpg",
  "jiewei": "https://example.com/end.jpg",
  "wenan": "æ–‡æ¡ˆå†…å®¹ #è¯é¢˜æ ‡ç­¾ #å°çº¢ä¹¦",
  "topics": ["è¯é¢˜1", "è¯é¢˜2"]
}
```

### æ‰¹é‡æ¡ç›®æ ¼å¼
```json
[
  {
    "fengmian": "https://example.com/cover1.jpg",
    "fengmian_pic": "https://example.com/cover1_after.jpg",
    "neirongtu": ["https://example.com/img1.jpg"],
    "wenan": "ç¬¬ä¸€æ¡æ–‡æ¡ˆå†…å®¹..."
  },
  {
    "fengmian": "https://example.com/cover2.jpg",
    "fengmian_pic": "https://example.com/cover2_after.jpg",
    "neirongtu": ["https://example.com/img2.jpg"],
    "wenan": "ç¬¬äºŒæ¡æ–‡æ¡ˆå†…å®¹..."
  }
]
```

## å­—æ®µè¯´æ˜

- **fengmian**: å°é¢å›¾ç‰‡URLï¼ˆå¯é€‰ï¼‰
- **fengmian_pic**: å°é¢åå›¾ç‰‡URLï¼ˆå¯é€‰ï¼Œæ–°å¢å­—æ®µï¼‰
- **neirongtu**: å†…å®¹å›¾ç‰‡URLæ•°ç»„ï¼ˆå¯é€‰ï¼‰
- **zongjie**: æ€»ç»“å›¾ç‰‡URLï¼ˆå¯é€‰ï¼Œåœ¨å†…å®¹å›¾ä¹‹åï¼Œç»“å°¾å›¾ä¹‹å‰ï¼‰
- **jiewei**: ç»“å°¾å›¾ç‰‡URLï¼ˆå¯é€‰ï¼‰
- **wenan**: æ–‡æ¡ˆå†…å®¹ï¼ˆå¿…éœ€ï¼‰
- **topics**: è¯é¢˜æ ‡ç­¾æ•°ç»„ï¼ˆå¯é€‰ï¼Œå­—ç¬¦ä¸²æ•°ç»„æˆ–é€—å·åˆ†éš”å­—ç¬¦ä¸²ï¼‰

### å›¾ç‰‡æ’åºé¡ºåº

å›¾ç‰‡åœ¨å‘å¸ƒæ—¶æŒ‰ä»¥ä¸‹é¡ºåºæ’åˆ—ï¼š
1. **fengmian** - å°é¢å›¾ç‰‡
2. **fengmian_pic** - å°é¢åå›¾ç‰‡ï¼ˆğŸ†•æ–°å¢ï¼‰
3. **neirongtu** - å†…å®¹å›¾ç‰‡ï¼ˆå¯å¤šå¼ ï¼‰
4. **zongjie** - æ€»ç»“å›¾ç‰‡  
5. **jiewei** - ç»“å°¾å›¾ç‰‡

## è¯é¢˜å¤„ç†è¯´æ˜

ç³»ç»Ÿæ”¯æŒå¤šç§æ–¹å¼æ·»åŠ è¯é¢˜æ ‡ç­¾ï¼š

1. **ä»æ–‡æ¡ˆä¸­è‡ªåŠ¨æå–**: ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«æ–‡æ¡ˆä¸­ä»¥ `#` å¼€å¤´çš„è¯é¢˜æ ‡ç­¾
   ```
   "wenan": "ä»Šå¤©å¤©æ°”å¾ˆå¥½ #å¤©æ°” #å¿ƒæƒ… #ç”Ÿæ´»åˆ†äº«"
   ```
   **é‡è¦**: æå–è¯é¢˜åï¼ŒåŸå§‹çš„ `#` æ ‡ç­¾ä¼šä»æ–‡æ¡ˆä¸­åˆ é™¤ï¼Œé¿å…é‡å¤æ˜¾ç¤º

2. **é€šè¿‡topicså­—æ®µæŒ‡å®š**: å¯ä»¥åœ¨JSONä¸­ç›´æ¥æä¾›è¯é¢˜æ•°ç»„
   ```json
   "topics": ["è¯é¢˜1", "è¯é¢˜2", "è¯é¢˜3"]
   ```

3. **æ··åˆä½¿ç”¨**: å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤ç§æ–¹å¼ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆå¹¶å»é‡
   - topicså­—æ®µä¸­çš„è¯é¢˜ä¼˜å…ˆçº§æ›´é«˜
   - æ–‡æ¡ˆä¸­æå–çš„è¯é¢˜ä¼šè¡¥å……åˆ°topicsä¹‹å
   - è‡ªåŠ¨å»é™¤é‡å¤è¯é¢˜

## å¤„ç†æµç¨‹ç¤ºä¾‹

**è¾“å…¥JSON**:
```json
{
  "wenan": "ä»Šå¤©åˆ†äº«å°æŠ€å·§ #å°æŠ€å·§ #åˆ†äº«\n\nè¿™ä¸ªæ–¹æ³•å¾ˆå®ç”¨ #å®ç”¨",
  "topics": ["é¢å¤–è¯é¢˜"]
}
```

**å¤„ç†ç»“æœ**:
- **æ¸…ç†åæ–‡æ¡ˆ**: `"ä»Šå¤©åˆ†äº«å°æŠ€å·§\n\nè¿™ä¸ªæ–¹æ³•å¾ˆå®ç”¨"`ï¼ˆ#æ ‡ç­¾å·²åˆ é™¤ï¼‰
- **æœ€ç»ˆè¯é¢˜**: `["é¢å¤–è¯é¢˜", "å°æŠ€å·§", "åˆ†äº«", "å®ç”¨"]`
- **å‘å¸ƒä½ç½®**: è¯é¢˜æ ‡ç­¾ä¼šæ·»åŠ åˆ°æ–‡ç« å†…å®¹çš„æœ«å°¾ä½ç½®

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1: å‘å¸ƒå•ä¸ªå†…å®¹

```python
# JSONæ•°æ®
json_data = {
    "fengmian": "https://via.placeholder.com/800x600/FF0000/FFFFFF?text=Cover",
    "fengmian_pic": "https://via.placeholder.com/800x600/FFA500/FFFFFF?text=CoverAfter",
    "neirongtu": [
        "https://via.placeholder.com/800x600/00FF00/FFFFFF?text=Content1",
        "https://via.placeholder.com/800x600/0000FF/FFFFFF?text=Content2"
    ],
    "zongjie": "https://via.placeholder.com/800x600/FF00FF/FFFFFF?text=Summary",
    "jiewei": "https://via.placeholder.com/800x600/FFFF00/000000?text=End",
    "wenan": "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•å‘å¸ƒ\n\nä»Šå¤©å¤©æ°”å¾ˆå¥½ï¼Œé€‚åˆå‡ºé—¨èµ°èµ°ã€‚\n\n#æµ‹è¯• #å°çº¢ä¹¦ #å‘å¸ƒ"
}

# å‘å¸ƒå†…å®¹
result = await publish_from_json(json.dumps(json_data))
```

### ç¤ºä¾‹2: æ‰¹é‡å‘å¸ƒå†…å®¹

```python
# æ‰¹é‡JSONæ•°æ®
json_data = [
    {
        "fengmian": "https://via.placeholder.com/800x600/FF0000/FFFFFF?text=Cover1",
        "fengmian_pic": "https://via.placeholder.com/800x600/FFA500/FFFFFF?text=CoverAfter1",
        "neirongtu": ["https://via.placeholder.com/800x600/00FF00/FFFFFF?text=Content1"],
        "wenan": "ç¬¬ä¸€æ¡æµ‹è¯•å†…å®¹\n\nè¿™æ˜¯ç¬¬ä¸€æ¡æµ‹è¯•å‘å¸ƒçš„å†…å®¹ã€‚\n\n#æµ‹è¯•1 #å°çº¢ä¹¦"
    },
    {
        "fengmian": "https://via.placeholder.com/800x600/0000FF/FFFFFF?text=Cover2",
        "fengmian_pic": "https://via.placeholder.com/800x600/FF6347/FFFFFF?text=CoverAfter2",
        "neirongtu": ["https://via.placeholder.com/800x600/FFFF00/000000?text=Content2"],
        "wenan": "ç¬¬äºŒæ¡æµ‹è¯•å†…å®¹\n\nè¿™æ˜¯ç¬¬äºŒæ¡æµ‹è¯•å‘å¸ƒçš„å†…å®¹ã€‚\n\n#æµ‹è¯•2 #å°çº¢ä¹¦"
    }
]

# æ‰¹é‡å‘å¸ƒå†…å®¹
result = await batch_publish_from_json(json.dumps(json_data), max_items=2)
```

### ç¤ºä¾‹3: é¢„è§ˆJSONæ•°æ®

```python
# é¢„è§ˆJSONæ•°æ®
result = await preview_json_data(json.dumps(json_data))
```

## ä½¿ç”¨æµç¨‹

1. **ç™»å½•å°çº¢ä¹¦**: ä½¿ç”¨ `login_xiaohongshu()` ç™»å½•å°çº¢ä¹¦
2. **é¢„è§ˆæ•°æ®**: ä½¿ç”¨ `preview_json_data()` é¢„è§ˆJSONæ•°æ®å†…å®¹
3. **å‘å¸ƒå†…å®¹**: ä½¿ç”¨ `publish_from_json()` æˆ– `batch_publish_from_json()` å‘å¸ƒå†…å®¹
4. **æŸ¥çœ‹è¿›åº¦**: ä½¿ç”¨ `check_task_status()` æŸ¥çœ‹å‘å¸ƒè¿›åº¦
5. **è·å–ç»“æœ**: ä½¿ç”¨ `get_task_result()` è·å–å‘å¸ƒç»“æœ

## ä¼˜åŠ¿

1. **æ›´å¯é **: é¿å…äº†æ–‡ä»¶è¯»å–å¯èƒ½å‡ºç°çš„é—®é¢˜
2. **æ›´çµæ´»**: å¯ä»¥ç›´æ¥åœ¨ä»£ç ä¸­æ„é€ JSONæ•°æ®
3. **æ›´é«˜æ•ˆ**: å‡å°‘äº†æ–‡ä»¶I/Oæ“ä½œ
4. **æ›´å®‰å…¨**: é¿å…äº†æ–‡ä»¶è·¯å¾„å’Œæƒé™é—®é¢˜

## æ³¨æ„äº‹é¡¹

1. **å›¾ç‰‡æ•°é‡é™åˆ¶**: å°çº¢ä¹¦æœ€å¤šæ”¯æŒ9å¼ å›¾ç‰‡ï¼Œè¶…è¿‡ä¼šè‡ªåŠ¨æˆªå–å‰9å¼ 
2. **æ–‡æ¡ˆå¿…éœ€**: `wenan` å­—æ®µæ˜¯å¿…éœ€çš„ï¼Œä¸èƒ½ä¸ºç©º
3. **URLæ ¼å¼**: å›¾ç‰‡URLå¿…é¡»æ˜¯æœ‰æ•ˆçš„ç½‘ç»œåœ°å€
4. **æ‰¹é‡é™åˆ¶**: æ‰¹é‡å‘å¸ƒé»˜è®¤æœ€å¤šå¤„ç†5ä¸ªæ¡ç›®ï¼Œå¯é€šè¿‡ `max_items` å‚æ•°è°ƒæ•´
5. **è¯é¢˜æ ‡ç­¾**: 
   - è¯é¢˜æ•°é‡å»ºè®®æ§åˆ¶åœ¨10ä¸ªä»¥å†…
   - å•ä¸ªè¯é¢˜é•¿åº¦ä¸è¶…è¿‡20ä¸ªå­—ç¬¦
   - æ”¯æŒä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ç»„åˆ
   - æ–‡æ¡ˆä¸­çš„#è¯é¢˜ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºå¯ç‚¹å‡»çš„è¯é¢˜æ ‡ç­¾ 