#!/bin/bash
# å°çº¢ä¹¦å·¥å…·åŒ… - ç»Ÿä¸€å¯åŠ¨è„šæœ¬

# èŽ·å–è„šæœ¬ç›®å½•
SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"
cd "$SCRIPT_DIR"

# å¦‚æžœæ²¡æœ‰å‚æ•°ï¼Œå¯åŠ¨äº¤äº’å¼ç•Œé¢
if [ $# -eq 0 ]; then
    # æ£€æŸ¥æ˜¯å¦æœ‰uvå‘½ä»¤
    if command -v uv &> /dev/null; then
        if [ ! -d ".venv" ]; then
            echo "ðŸ”§ é¦–æ¬¡è¿è¡Œï¼Œæ­£åœ¨å®‰è£…ä¾èµ–..."
            uv sync
        fi
        exec uv run python xhs_toolkit_interactive.py
    elif [ -f ".venv/bin/python" ]; then
        exec .venv/bin/python xhs_toolkit_interactive.py
    elif [ -f "venv/bin/python" ]; then
        exec venv/bin/python xhs_toolkit_interactive.py
    else
        if command -v python3 &> /dev/null; then
            exec python3 xhs_toolkit_interactive.py
        else
            exec python xhs_toolkit_interactive.py
        fi
    fi
else
    # å¦‚æžœæœ‰å‚æ•°ï¼Œæ‰§è¡Œä¼ ç»Ÿå‘½ä»¤
    if command -v uv &> /dev/null && [ -d ".venv" ]; then
        exec uv run python xhs_toolkit.py "$@"
    elif [ -f ".venv/bin/python" ]; then
        exec .venv/bin/python xhs_toolkit.py "$@"
    elif [ -f "venv/bin/python" ]; then
        exec venv/bin/python xhs_toolkit.py "$@"
    else
        if command -v python3 &> /dev/null; then
            exec python3 xhs_toolkit.py "$@"
        else
            exec python xhs_toolkit.py "$@"
        fi
    fi
fi